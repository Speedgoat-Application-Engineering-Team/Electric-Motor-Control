<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,IE=9,chrome=1"><meta name="generator" content="MATLAB R2020a"><title>Verify Hardware and Simulation Results</title><style type="text/css">.rtcContent { padding: 30px; } .S0 { margin: 3px 10px 5px 4px; padding: 0px; line-height: 28.8px; min-height: 0px; white-space: pre-wrap; color: rgb(213, 80, 0); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 24px; font-weight: 400; text-align: left;  }
.S1 { margin-bottom: 20px; padding-bottom: 4px;  }
.S2 { margin: 0px; padding: 10px 0px 10px 5px; line-height: 21px; min-height: 0px; white-space: pre-wrap; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 14px; font-weight: 700; text-align: start;  }
.S3 { margin: -1px 0px 0px; padding: 10px 0px 10px 7px; line-height: 21px; min-height: 0px; white-space: pre-wrap; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 14px; font-weight: 400; text-align: start;  }
.S4 { margin: 3px 10px 5px 4px; padding: 0px; line-height: 20px; min-height: 0px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 20px; font-weight: 700; text-align: left;  }
.CodeBlock { background-color: #F7F7F7; margin: 10px 0 10px 0;}
.S5 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 1px solid rgb(233, 233, 233); border-bottom: 0px none rgb(0, 0, 0); border-radius: 4px 4px 0px 0px; padding: 6px 45px 0px 13px; line-height: 17.234px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S6 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 0px none rgb(0, 0, 0); border-bottom: 1px solid rgb(233, 233, 233); border-radius: 0px; padding: 0px 45px 4px 13px; line-height: 17.234px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S7 { color: rgb(64, 64, 64); padding: 10px 0px 6px 17px; background: rgb(255, 255, 255) none repeat scroll 0% 0% / auto padding-box border-box; font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px; overflow-x: hidden; line-height: 17.234px;  }
.embeddedOutputsErrorElement {min-height: 18px; max-height: 250px; overflow: auto;}
.embeddedOutputsErrorElement.inlineElement {}
.embeddedOutputsErrorElement.rightPaneElement {}
.embeddedOutputsWarningElement{min-height: 18px; max-height: 250px; overflow: auto;}
.embeddedOutputsWarningElement.inlineElement {}
.embeddedOutputsWarningElement.rightPaneElement {}
.diagnosticMessage-wrapper {font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 12px;}
.diagnosticMessage-wrapper.diagnosticMessage-warningType {color: rgb(255,100,0);}
.diagnosticMessage-wrapper.diagnosticMessage-warningType a {color: rgb(255,100,0); text-decoration: underline;}
.diagnosticMessage-wrapper.diagnosticMessage-errorType {color: rgb(230,0,0);}
.diagnosticMessage-wrapper.diagnosticMessage-errorType a {color: rgb(230,0,0); text-decoration: underline;}
.diagnosticMessage-wrapper .diagnosticMessage-messagePart,.diagnosticMessage-wrapper .diagnosticMessage-causePart {white-space: pre-wrap;}
.diagnosticMessage-wrapper .diagnosticMessage-stackPart {white-space: pre;}
.embeddedOutputsTextElement,.embeddedOutputsVariableStringElement {white-space: pre; word-wrap: initial; min-height: 18px; max-height: 250px; overflow: auto;}
.textElement,.rtcDataTipElement .textElement {padding-top: 3px;}
.embeddedOutputsTextElement.inlineElement,.embeddedOutputsVariableStringElement.inlineElement {}
.inlineElement .textElement {}
.embeddedOutputsTextElement.rightPaneElement,.embeddedOutputsVariableStringElement.rightPaneElement {min-height: 16px;}
.rightPaneElement .textElement {padding-top: 2px; padding-left: 9px;}
.S8 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 1px solid rgb(233, 233, 233); border-bottom: 0px none rgb(0, 0, 0); border-radius: 0px; padding: 6px 45px 0px 13px; line-height: 17.234px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S9 { margin: 10px 10px 9px 4px; padding: 0px; line-height: 21px; min-height: 0px; white-space: pre-wrap; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 14px; font-weight: 400; text-align: left;  }
.S10 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 0px none rgb(0, 0, 0); border-bottom: 0px none rgb(0, 0, 0); border-radius: 0px; padding: 0px 45px 0px 13px; line-height: 17.234px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S11 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 0px none rgb(0, 0, 0); border-bottom: 1px solid rgb(233, 233, 233); border-radius: 0px 0px 4px 4px; padding: 0px 45px 4px 13px; line-height: 17.234px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S12 { margin: 3px 10px 5px 4px; padding: 0px; line-height: 18px; min-height: 0px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 17px; font-weight: 700; text-align: left;  }
.S13 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 1px solid rgb(233, 233, 233); border-bottom: 1px solid rgb(233, 233, 233); border-radius: 4px 4px 0px 0px; padding: 6px 45px 4px 13px; line-height: 17.234px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S14 { margin: 10px 10px 5px 4px; padding: 0px; line-height: 18px; min-height: 0px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 15px; font-weight: 700; text-align: left;  }
.S15 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 1px solid rgb(233, 233, 233); border-bottom: 1px solid rgb(233, 233, 233); border-radius: 4px; padding: 6px 45px 4px 13px; line-height: 17.234px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S16 { margin: 15px 10px 5px 4px; padding: 0px; line-height: 18px; min-height: 0px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 17px; font-weight: 700; text-align: left;  }</style></head><body><div class = rtcContent><h1  class = 'S0' id = 'T_4A329371' ><span>Verify Hardware and Simulation Results</span></h1><div  class = 'S1'><div  class = 'S2'><span style=' font-weight: bold;'>Table of Contents</span></div><div  class = 'S3'><a href = "#H_637E92EF"><span>Open Real-Time Model
</span></a><span>    </span><a href = "#H_438E4D33"><span>Build and Download
</span></a><span>    </span><a href = "#H_D75C0F8C"><span>Run and Plot Logged Data
</span></a><span>        </span><a href = "#H_BE947AE1"><span>Start Application 
</span></a><span>        </span><a href = "#H_2E895DEF"><span>Plot Logged Data
</span></a><a href = "#H_07488DBE"><span>Compare Experiment Result with Desktop Simulation 
</span></a><span>    </span><a href = "#H_CB110871"><span>View and Compare Data in Simulation Data Inspector
</span></a><a href = "#H_6F92D868"><span>Clear Workspace</span></a></div></div><h2  class = 'S4' id = 'H_637E92EF' ><span>Open Real-Time Model</span></h2><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre;"><span>mdl = </span><span style="color: rgb(160, 32, 240);">'FieldOrientedController_RCP'</span><span>;</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S6'><span style="white-space: pre;"><span>open_system(mdl);</span></span></div><div  class = 'S7'><div class="inlineElement eoOutputWrapper embeddedOutputsWarningElement" uid="FF3933D3" contenteditable="false" data-testid="output_0" data-width="428" data-height="44" data-hashorizontaloverflow="false" style="width: 458px; max-height: 261px;"><div class="diagnosticMessage-wrapper diagnosticMessage-warningType"><div class="diagnosticMessage-messagePart">Warning: Unable to locate Requirement Set motorControlRequirements.slreqx (referrer FieldOrientedController.slx).</div><div class="diagnosticMessage-stackPart"></div></div></div></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>switchConfig(</span><span style="color: rgb(160, 32, 240);">'RCP'</span><span>);</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S6'><span style="white-space: pre;"><span>switchMotorKit(</span><span style="color: rgb(160, 32, 240);">'SG_Inverter_RCP_Kit'</span><span>);</span></span></div><div  class = 'S7'><div class="inlineElement eoOutputWrapper embeddedOutputsWarningElement" uid="D319575D" contenteditable="false" data-testid="output_1" style="width: 458px; max-height: 261px;" data-width="428" data-height="18" data-hashorizontaloverflow="false"><div class="diagnosticMessage-wrapper diagnosticMessage-warningType"><div class="diagnosticMessage-messagePart">Warning: The data dictionary 'TIKitPlantData.sldd' was not found.</div><div class="diagnosticMessage-stackPart"></div></div></div><div class="inlineElement eoOutputWrapper embeddedOutputsWarningElement" uid="8DC3BEAD" contenteditable="false" data-testid="output_2" style="width: 458px; max-height: 261px;" data-width="428" data-height="30" data-hashorizontaloverflow="false"><div class="diagnosticMessage-wrapper diagnosticMessage-warningType"><div class="diagnosticMessage-messagePart">Warning: PMSM_MCBS_Model (blockdiagram.xml, line 36): The data dictionary 'TIKitPlantData.sldd' was not found.</div><div class="diagnosticMessage-stackPart"></div></div></div><div class="inlineElement eoOutputWrapper embeddedOutputsWarningElement" uid="454C8414" contenteditable="false" data-testid="output_3" style="width: 458px; max-height: 261px;" data-width="428" data-height="30" data-hashorizontaloverflow="false"><div class="diagnosticMessage-wrapper diagnosticMessage-warningType"><div class="diagnosticMessage-messagePart">Warning: Unable to find configuration set 'Sim' for the active configuration reference 'Sim'</div><div class="diagnosticMessage-stackPart"></div></div></div><div class="inlineElement eoOutputWrapper embeddedOutputsWarningElement" uid="EF956A5E" contenteditable="false" data-testid="output_4" style="width: 458px; max-height: 261px;" data-width="428" data-height="30" data-hashorizontaloverflow="false"><div class="diagnosticMessage-wrapper diagnosticMessage-warningType"><div class="diagnosticMessage-messagePart">Warning: Unable to get parameter 'ActiveStateOutputEnumStorageType' from referenced configuration set 'Sim' in data dictionary.</div><div class="diagnosticMessage-stackPart"></div></div></div><div class="inlineElement eoOutputWrapper embeddedOutputsWarningElement" uid="B06C61DD" contenteditable="false" data-testid="output_5" style="width: 458px; max-height: 261px;" data-width="428" data-height="18" data-hashorizontaloverflow="false"><div class="diagnosticMessage-wrapper diagnosticMessage-warningType"><div class="diagnosticMessage-messagePart">Warning: The data dictionary 'TIKitPlantData.sldd' was not found.</div><div class="diagnosticMessage-stackPart"></div></div></div></div></div></div><div  class = 'S9'><span>Select Signal Editor Experiement </span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre;"><span>set_param([mdl,</span><span style="color: rgb(160, 32, 240);">'/enManualTestInputs'</span><span>],</span><span style="color: rgb(160, 32, 240);">'Value'</span><span>,</span><span style="color: rgb(160, 32, 240);">'0'</span><span>); </span><span style="color: rgb(60, 118, 61);">% Select SignalEditor_Experiments as Test Inputs </span></span></div></div><div class="inlineWrapper"><div  class = 'S10'><span style="white-space: pre;"><span>set_param([mdl,</span><span style="color: rgb(160, 32, 240);">'/SignalEditor_Experiments'</span><span>], </span><span style="color: rgb(0, 0, 255);">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre;"><span>    </span><span style="color: rgb(160, 32, 240);">'ActiveScenario'</span><span>,</span><span style="color: rgb(160, 32, 240);">'Test_Case_100_rad_sec_step_No_load'</span><span>); </span><span style="color: rgb(60, 118, 61);">% Select Experiment</span></span></div></div></div><h3  class = 'S12' id = 'H_438E4D33' ><span>Build and Download</span></h3><div class="CodeBlock"><div class="inlineWrapper outputs"><div  class = 'S13'><span style="white-space: pre;"><span>rtwbuild(mdl);</span></span></div><div  class = 'S7'><div class="inlineElement eoOutputWrapper embeddedOutputsTextElement scrollableOutput" uid="3D4E282E" contenteditable="false" data-testid="output_6" data-width="428" data-height="45" data-hashorizontaloverflow="true" style="width: 458px; max-height: 261px;"><div class="textElement">### Starting serial model reference code generation build

### Starting Simulink Real-Time build procedure for model: FieldOrientedController</div></div><div class="inlineElement eoOutputWrapper embeddedOutputsWarningElement" uid="8D18DE1F" contenteditable="false" data-testid="output_7" data-width="428" data-height="44" data-hashorizontaloverflow="false" style="width: 458px; max-height: 261px;"><div class="diagnosticMessage-wrapper diagnosticMessage-warningType"><div class="diagnosticMessage-messagePart">Warning: This model contains blocks that do not handle sample time<br>changes at runtime. To avoid incorrect results, only change<br>the sample time in the original model, then rebuild the model.</div><div class="diagnosticMessage-stackPart"></div></div></div><div class="inlineElement eoOutputWrapper embeddedOutputsTextElement scrollableOutput" uid="2CB42549" contenteditable="false" data-testid="output_8" data-width="428" data-height="45" data-hashorizontaloverflow="true" style="width: 458px; max-height: 261px;"><div class="textElement">### Successful completion of build procedure for: FieldOrientedController

### Starting Simulink Real-Time build procedure for model: FieldOrientedController_RCP</div></div><div class="inlineElement eoOutputWrapper embeddedOutputsWarningElement" uid="8AD54B92" contenteditable="false" data-testid="output_9" data-width="428" data-height="44" data-hashorizontaloverflow="false" style="width: 458px; max-height: 261px;"><div class="diagnosticMessage-wrapper diagnosticMessage-warningType"><div class="diagnosticMessage-messagePart">Warning: This model contains blocks that do not handle sample time<br>changes at runtime. To avoid incorrect results, only change<br>the sample time in the original model, then rebuild the model.</div><div class="diagnosticMessage-stackPart"></div></div></div><div class="inlineElement eoOutputWrapper embeddedOutputsTextElement scrollableOutput" uid="6A56CB51" contenteditable="false" data-testid="output_10" data-width="428" data-height="31" data-hashorizontaloverflow="true" style="width: 458px; max-height: 261px;"><div class="textElement">### Successful completion of build procedure for: FieldOrientedController_RCP
### Created MLDATX ..\FieldOrientedController_RCP.mldatx</div></div></div></div></div><h3  class = 'S12' id = 'H_D75C0F8C' ><span>Run and Plot Logged Data</span></h3><h4  class = 'S14' id = 'H_BE947AE1' ><span>Start Application </span></h4><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre;"><span>tg = slrt;</span></span></div></div><div class="inlineWrapper"><div  class = 'S10'><span style="white-space: pre;"><span>proj = matlab.project.rootProject</span></span></div></div><div class="inlineWrapper"><div  class = 'S10'><span style="white-space: pre;"><span>cd(proj.SimulinkCodeGenFolder) </span><span style="color: rgb(60, 118, 61);">%move to build folder</span></span></div></div><div class="inlineWrapper"><div  class = 'S10'><span style="white-space: pre;"><span>load(tg, mdl);</span></span></div></div><div class="inlineWrapper"><div  class = 'S10'><span style="white-space: pre;"><span>tg.StopTime = 5;</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre;"><span>tg.start; pause(6);</span></span></div></div></div><h4  class = 'S14' id = 'H_2E895DEF' ><span>Plot Logged Data</span></h4><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre;"><span>experimentRun = Simulink.sdi.Run.getLatest;</span></span></div></div><div class="inlineWrapper"><div  class = 'S10'><span style="white-space: pre;"><span>experimentRun.Name = [</span><span style="color: rgb(160, 32, 240);">'Closed-Loop Exp - ' </span><span>char(experimentRun.DateCreated)];</span></span></div></div><div class="inlineWrapper"><div  class = 'S10'><span style="white-space: pre;"><span>sigExp = getSignalsByName(experimentRun,</span><span style="color: rgb(160, 32, 240);">'rotorVelocity'</span><span>);</span></span></div></div><div class="inlineWrapper"><div  class = 'S10'><span style="white-space: pre;"><span>Simulink.sdi.setSubPlotLayout(1,1);</span></span></div></div><div class="inlineWrapper"><div  class = 'S10'><span style="white-space: pre;"><span>sigExp.Checked = true; </span><span style="color: rgb(60, 118, 61);">% Mark Signal for Plotting</span></span></div></div><div class="inlineWrapper"><div  class = 'S10'><span style="white-space: pre;"><span>Simulink.sdi.view;</span><span style="color: rgb(60, 118, 61);">% Open Simulation Data Inspector UI</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre;"><span>close_system(mdl,0);</span></span></div></div></div><h2  class = 'S4' id = 'H_07488DBE' ><span>Compare Experiment Result with Desktop Simulation </span></h2><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre;"><span>mdl = </span><span style="color: rgb(160, 32, 240);">'FieldOrientedController_MIL'</span><span>;</span></span></div></div><div class="inlineWrapper"><div  class = 'S10'><span style="white-space: pre;"><span>open_system(mdl);</span></span></div></div><div class="inlineWrapper"><div  class = 'S10'><span style="white-space: pre;"><span>switchConfig(</span><span style="color: rgb(160, 32, 240);">'MIL'</span><span>);</span></span></div></div><div class="inlineWrapper"><div  class = 'S10'><span style="white-space: pre;"><span>switchMotorKit(</span><span style="color: rgb(160, 32, 240);">'SG_Inverter_RCP_Kit'</span><span>);</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'></div></div></div><div  class = 'S9'><span>Select Signal Editor Experiement </span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre;"><span>set_param([mdl,</span><span style="color: rgb(160, 32, 240);">'/enManualTestInputs'</span><span>],</span><span style="color: rgb(160, 32, 240);">'Value'</span><span>,</span><span style="color: rgb(160, 32, 240);">'0'</span><span>); </span><span style="color: rgb(60, 118, 61);">% Select SignalEditor_Experiments as Test Inputs </span></span></div></div><div class="inlineWrapper"><div  class = 'S10'><span style="white-space: pre;"><span>set_param([mdl,</span><span style="color: rgb(160, 32, 240);">'/SignalEditor_Experiments'</span><span>], </span><span style="color: rgb(0, 0, 255);">...</span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre;"><span>    </span><span style="color: rgb(160, 32, 240);">'ActiveScenario'</span><span>,</span><span style="color: rgb(160, 32, 240);">'Test_Case_100_rad_sec_step_No_load'</span><span>); </span><span style="color: rgb(60, 118, 61);">% Select Experiment</span></span></div></div></div><div  class = 'S9'><span>Simulate Model</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S15'><span style="white-space: pre;"><span>sim(mdl,</span><span style="color: rgb(160, 32, 240);">'StopTime'</span><span>,</span><span style="color: rgb(160, 32, 240);">'5'</span><span>); </span></span></div></div></div><h3  class = 'S16' id = 'H_CB110871' ><span>View and Compare Data in Simulation Data Inspector</span></h3><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre;"><span>desktopRun = Simulink.sdi.Run.getLatest;</span></span></div></div><div class="inlineWrapper"><div  class = 'S10'><span style="white-space: pre;"><span>desktopRun.Name = [</span><span style="color: rgb(160, 32, 240);">'Closed-Loop Sim - ' </span><span>char(desktopRun.DateCreated)];</span></span></div></div><div class="inlineWrapper"><div  class = 'S10'><span style="white-space: pre;"><span>sigSim = getSignalsByName(desktopRun,</span><span style="color: rgb(160, 32, 240);">'rotorVelocity'</span><span>);</span></span></div></div><div class="inlineWrapper"><div  class = 'S10'><span style="white-space: pre;"><span>sigSim.Checked = true; </span><span style="color: rgb(60, 118, 61);">% Mark Signal for Plotting</span></span></div></div><div class="inlineWrapper"><div  class = 'S10'><span style="white-space: pre;"><span>Simulink.sdi.view; </span><span style="color: rgb(60, 118, 61);">% Open Simulation Data Inspector </span></span></div></div><div class="inlineWrapper"><div  class = 'S11'><span style="white-space: pre;"><span>close_system(mdl,0);</span></span></div></div></div><h2  class = 'S4' id = 'H_6F92D868' ><span>Clear Workspace</span></h2><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S15'><span style="white-space: pre;"><span>clear </span><span style="color: rgb(160, 32, 240);">mdl tg experimentRun sigExp desktopRun sigSim</span></span></div></div></div></div>
<br>
<!-- 
##### SOURCE BEGIN #####
%% Verify Hardware and Simulation Results
%% Open Real-Time Model

mdl = 'FieldOrientedController_RCP';
open_system(mdl);
switchConfig('RCP');
switchMotorKit('SG_Inverter_RCP_Kit');
%% 
% Select Signal Editor Experiement 

set_param([mdl,'/enManualTestInputs'],'Value','0'); % Select SignalEditor_Experiments as Test Inputs 
set_param([mdl,'/SignalEditor_Experiments'], ...
    'ActiveScenario','Test_Case_100_rad_sec_step_No_load'); % Select Experiment
% Build and Download

rtwbuild(mdl);
% Run and Plot Logged Data
% Start Application 

tg = slrt;
proj = matlab.project.rootProject
cd(proj.SimulinkCodeGenFolder) %move to build folder
load(tg, mdl);
tg.StopTime = 5;
tg.start; pause(6);
% Plot Logged Data

experimentRun = Simulink.sdi.Run.getLatest;
experimentRun.Name = ['Closed-Loop Exp - ' char(experimentRun.DateCreated)];
sigExp = getSignalsByName(experimentRun,'rotorVelocity');
Simulink.sdi.setSubPlotLayout(1,1);
sigExp.Checked = true; % Mark Signal for Plotting
Simulink.sdi.view;% Open Simulation Data Inspector UI
close_system(mdl,0);
%% Compare Experiment Result with Desktop Simulation 

mdl = 'FieldOrientedController_MIL';
open_system(mdl);
switchConfig('MIL');
switchMotorKit('SG_Inverter_RCP_Kit');

%% 
% Select Signal Editor Experiement 

set_param([mdl,'/enManualTestInputs'],'Value','0'); % Select SignalEditor_Experiments as Test Inputs 
set_param([mdl,'/SignalEditor_Experiments'], ...
    'ActiveScenario','Test_Case_100_rad_sec_step_No_load'); % Select Experiment
%% 
% Simulate Model

sim(mdl,'StopTime','5'); 
% View and Compare Data in Simulation Data Inspector

desktopRun = Simulink.sdi.Run.getLatest;
desktopRun.Name = ['Closed-Loop Sim - ' char(desktopRun.DateCreated)];
sigSim = getSignalsByName(desktopRun,'rotorVelocity');
sigSim.Checked = true; % Mark Signal for Plotting
Simulink.sdi.view; % Open Simulation Data Inspector 
close_system(mdl,0);
%% Clear Workspace

clear mdl tg experimentRun sigExp desktopRun sigSim
##### SOURCE END #####
--></body></html>